(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a(52)},48:function(e,t,a){},49:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(18),c=a.n(i),o=(a(37),a(25)),s=a(10),l=a(7),u=a(8),m=a(13),d=a(12),f=a(14),h=a(19),v=a.n(h),p=a(26),g=function(){function e(){Object(l.a)(this,e),this._apiBase="https://www.reddit.com/r/cats.json?",this._nextPosts="",this.mediaFilter=function(e){return e.filter(function(e){return e.data.is_reddit_media_domain})}}return Object(u.a)(e,[{key:"getResource",value:function(){var e=Object(p.a)(v.a.mark(function e(t){var a,n,r,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,fetch("".concat(this._apiBase,"after=").concat(this._nextPosts));case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,fetch("".concat(this._apiBase,"limit=25"));case 8:e.t0=e.sent;case 9:if((a=e.t0).ok){e.next=12;break}throw new Error("Could not fetch ".concat(this._apiBase,", received ").concat(a.status));case 12:return e.next=14,a.json();case 14:return n=e.sent,this._nextPosts=n.data.after,r=Object(s.a)(n.data.children),i=this.mediaFilter(r),e.abrupt("return",i);case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),b=function(){var e;return{makeClient:function(){return e||(e=new g),e}}}(),E=a(27),w=a.n(E),y=a(28),O=a.n(y),j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={hasError:!1,visible:!0},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.video.play(),window.addEventListener("scroll",function(){e.video&&(e.state.visible?e.video.play():e.video.pause())})}},{key:"componentWillReceiveProps",value:function(e){this.setState({visible:e.isVisible})}},{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){var e=this;return this.state.hasError?r.a.createElement("h1",{className:"mt-5 text-center"},"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"):r.a.createElement("video",{ref:function(t){e.video=t},controls:!0,className:"pt-4",name:"media",style:{maxHeight:"80vh"}},r.a.createElement("source",{src:this.props.src,type:"video/mp4"}))}}]),t}(n.Component),k=function(e,t){var a=!1;return function(){a||(e.apply(this,arguments),a=!0,setTimeout(function(){return a=!1},t))}},x=function(e){var t=e.indexOf("?");return e.slice(0,t)},N=(a(48),function(){return r.a.createElement("div",{className:"main-container"},r.a.createElement("div",{className:"lds-css"},r.a.createElement("div",{className:"lds-double-ring"},r.a.createElement("div",null),r.a.createElement("div",null))))});a(49);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach(function(t){Object(o.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={showFavorites:!1,hasError:!1,loading:!0,array2:[],favorites:[]},a.addPosts=function(){a.setState({loading:!0}),b.makeClient().getResource(!0).then(function(e){return a.setState(function(t){return{array2:[].concat(Object(s.a)(t.array2),Object(s.a)(e))}},function(){a.setState({loading:!1})})})},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.makeClient().getResource().then(function(t){return e.setState({loading:!1,array2:t})}),window.addEventListener("scroll",function(){document.documentElement.clientHeight+1>=Math.floor(document.documentElement.getBoundingClientRect().bottom)&&!e.state.showFavorites&&k(e.addPosts,1e3)()})}},{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){var e=this,t=function(t){return t.map(function(t){var a=t.data,n=a.is_video,i=a.created,c=a.url,o=a.title,l=a.id,u=a.author_fullname,m=a.author,d="".concat(i).concat(l).concat(u),f=n&&a.media.reddit_video.fallback_url,h=e.state.favorites.some(function(e){return e.data.unikId===d});return r.a.createElement("div",{className:"card col-md-5 mt-5 py-3",key:d,style:{minHeigth:"75vh",maxHeigth:"75vh"}},r.a.createElement("div",{className:"text-muted small pt-4"},"Posted by ".concat(m)),n?r.a.createElement(w.a,null,r.a.createElement(j,{src:x(f)})):r.a.createElement(O.a,{image:{src:"".concat(c),alt:"".concat(o),className:"card-img-top m-auto pt-4",style:{width:"21vw",maxHeight:"73vh"}},zoomImage:{src:"bridge-big.jpg",alt:"Golden Gate Bridge"}}),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},o),r.a.createElement("a",{href:"#2",onClick:function(t){t.preventDefault();var n={data:_({},a,{unikId:d})};if(h){var r=e.state.favorites.filter(function(e){return e.data.unikId!==d});return e.setState({favorites:r})}e.setState(function(e){return{favorites:[].concat(Object(s.a)(e.favorites),[n])}})}},r.a.createElement("img",{src:h?"https://image.flaticon.com/icons/png/512/69/69450.png":"https://image.flaticon.com/icons/png/512/25/25424.png",alt:"heart icon",width:"20px"}))))})};return this.state.hasError?r.a.createElement("h1",{className:"mt-5 text-center"},"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"):r.a.createElement("div",{className:"text-center d-flex flex-column align-items-center"},this.state.loading?r.a.createElement(N,null):null,this.state.showFavorites?t(this.state.favorites):t(this.state.array2),r.a.createElement("a",{href:"#favorites",className:"favorites",onClick:function(t){t.preventDefault(),e.setState(function(e){return{showFavorites:!e.showFavorites}})}},r.a.createElement("img",{src:this.state.showFavorites?"https://image.flaticon.com/icons/png/512/25/25424.png":"https://image.flaticon.com/icons/png/512/69/69450.png",alt:"To the favorite/To the all",width:"20px",title:"show favorites"})))}}]),t}(n.Component),C=function(){return r.a.createElement("nav",{className:"navbar navbar-light bg-warning"},r.a.createElement("a",{className:"navbar-brand h1",href:"#1"},r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/0/0f/Kitten_1370737.svg",width:"30",height:"30",alt:""}),"Meow"))},D=a(29),F=a(6);var B=document.getElementById("root");c.a.render(r.a.createElement(function(){return r.a.createElement("div",{className:"App"},r.a.createElement(C,null),r.a.createElement(D.a,null,r.a.createElement(F.c,null,r.a.createElement(F.a,{path:"/",exact:!0,component:S}))))},null),B)}},[[32,1,2]]]);
//# sourceMappingURL=main.21f74141.chunk.js.map